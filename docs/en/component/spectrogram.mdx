import { CodeBlock } from '../../src/components/CodeBlock.tsx'
import { Default, Axis, Grid, EQ3 } from '../../src/components/UsageBox/Spectrogram.tsx'
import { SpectrogramAPITable } from '../../src/components/APITable/Spectrogram.tsx'

# Spectrogram

The Spectrogram component is an advanced and customizable tool for visualizing audio data. It is built on top of D3.js to render interactive and dynamic spectrum displays. This component offers high adaptability and is perfect for applications that require detailed and precise audio frequency analysis.

## Features

The Spectrogram performs spectrum analysis using the Fast Fourier Transform (FFT) with the ability to display audio frequency and energy on the spectrum chart.

## Import

<CodeBlock code={`import { Spectrogram } from 'echo-ui'`} />

## Usage

<Default />

### Audio Data

Audio data is an array, where each item is an object of type `SpectrogramDataPoint`. `frequency` represents the frequency, and `amplitude` represents the amplitude. This data can be obtained through the [AnalyserNode](https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/). Here's the type declaration for this object:

<CodeBlock
  code={`interface SpectrogramDataPoint { 
  frequency: number 
  amplitude: number 
}`}
/>

### Axis

<Axis />

The X-axis of the axis represents frequency, and the Y-axis represents amplitude. The range of the X-axis cannot be customized as it is calculated based on the audio's sampling rate. The range of the Y-axis can be customized by setting the `amplitudeRange` property. The coordinate labels for the X and Y axes can be customized using the `xAxisTicks` and `yAxisTicks` properties, respectively.

### Grid

<Grid />

The grid is drawn based on the axis's scales.

### Use Case: EQ3

<EQ3 />

The above example shows an application scenario of an EQ3, which is a three-band equalizer. It allows adjusting the audio's timbre by adjusting the gain of three frequency bands and real-time display of audio changes using the Spectrogram component.

## API

### Spectrogram

<SpectrogramAPITable />

## Type Declarations

<CodeBlock
  code={`export interface SpectrogramProps extends React.HTMLAttributes<HTMLDivElement> {
  data?: SpectrogramDataPoint[]
  fftSize?: number
  amplitudeRange?: [number, number]
  lineColor?: string
  lineWidth?: number
  axis?: boolean
  axisColor?: string
  xAxisTicks?: number[]
  yAxisTicks?: number[]
  grid?: boolean
  gridColor?: string
  shadow?: boolean
  shadowColor?: string
  shadowDirection?: 'top' | 'bottom'
  shadowHeight?: number
}

export interface SpectrogramDataPoint {
  frequency: number
  amplitude: number
}

export interface SpectrogramRef extends HTMLDivElement {}
`} />
