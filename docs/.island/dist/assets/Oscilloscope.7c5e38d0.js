import{K as A,p as D,U as x,A as O,c as o}from"./index.8d63da56.js";import{P}from"./index.194ce9d9.js";import*as s from"react";import{jsxs as R,jsx as e}from"react/jsx-runtime";import{A as S}from"./Analyser.525c4ea2.js";const w=()=>{const n="/audios/loop-5.mp3",[l,u]=s.useState([]),[i,p]=s.useState(!1),c=s.useRef(),t=s.useRef(null),m=512*2;s.useEffect(()=>(t.current=new P(n),c.current=new S("waveform",m),t.current.toDestination(),()=>{var r,a;(r=t.current)==null||r.disconnect(),(a=t.current)==null||a.dispose()}),[]);const h=async()=>{var r;if(!t.current||!c.current){console.error("Oscillator or Analyser is not initialized");return}i?(t.current.stop(),cancelAnimationFrame(d.current),u([]),p(!1)):((r=t.current)==null||r.connect(c.current),t.current.loop=!0,t.current.start(),p(!0),f())},d=s.useRef(0),f=()=>{var a;const r=(a=c.current)==null?void 0:a.getValue();if(r instanceof Float32Array){const g=Array.from(r).map((y,b)=>({index:b,amplitude:y}));u(g)}d.current=requestAnimationFrame(f)};return R("section",{className:"flex flex-col items-center gap-2",children:[e(A,{className:"w-full",data:l}),e(D,{onClick:h,toggled:i,children:i?"Stop":"Start"})]})},I=()=>e(x,{code:"<OscilloscopeDefault />",scope:{OscilloscopeDefault:w},type:"link",url:"https://github.com/codeacme17/echo-ui/blob/main/docs/src/components/Example/OscilloscopeDefault.tsx"}),j=()=>e(O,{data:[{attribute:"data*",description:"Array data passed to the oscilloscope(required)",type:e(o,{children:"OscilloscopeDataPoint[]"}),default:"-"},{attribute:"amplitudeRange",description:"Amplitude range, this property specifies the range of the Y-axis",type:e(o,{children:"[number, number]"}),default:e(o,{children:"[-2, 2]"})},{attribute:"lineColor",description:"Color of the oscilloscope's line",type:e(o,{children:"string"}),default:e(o,{children:"'var(--echo-primary)'"})},{attribute:"lineWidth",description:"Width of the oscilloscope's line",type:e(o,{children:"number"}),default:e(o,{children:"3"})}]});export{I as D,j as O};
