import{c as M,U as S,A as te,a as c}from"./index.105c25bf.js";import w,{createContext as re,forwardRef as L,useImperativeHandle as ae,useRef as z,useEffect as j,useState as O,useContext as X}from"react";import{jsx as e,jsxs as P}from"react/jsx-runtime";import{u as $,a as D}from"./usePlayer.db8858d9.js";import{u as R}from"./useVuMeter.35f28026.js";import{B as T}from"./index.9726f765.js";import{S as I}from"./square.0deaf827.js";import{P as H}from"./play.c5eb55f2.js";import{l as se}from"./transform.3e3dfeca.js";import{_ as oe}from"./assertion.e9357fda.js";import{l as x}from"./log.83f32a09.js";import{s as le}from"./index.93441784.js";import{A as ne}from"./index.41c546b7.js";const Q=re(null),ie=Q.Provider,g=5,ce=0,ue=-15,y=-60,me=30,de=({value:t})=>{if(!oe)return;if(Array.isArray(t)){if(t.length!==2)return x.error("VuMeter - dB array length is not equal to 2!"),!1;const[o,a]=t;o>g&&x.warn(`VuMeter - dB left value(${t[0]}) is higher than MAX(${g})`),o<y&&x.warn(`VuMeter - dB left value(${t[0]}) is lower than MIN(${y})`),a>g&&x.warn(`VuMeter - dB right value(${t[1]}) is higher than MAX(${g})`),a<y&&x.warn(`VuMeter - dB right value(${t[1]}) is lower than MIN(${y})`)}else t>g&&x.warn(`VuMeter - dB value(${t}) is higher than MAX (${g})`),t<y&&x.warn(`VuMeter - dB value(${t}) is lower than MIN (${y})`);return!0},pe=le({slots:{base:"group flex",lumps:"flex gap-1",lump:`
    bg-input 
    rounded-[2px] 
    transition-colors 
    duration-150
    data-[active=none]:bg-input
    data-[active=low]:bg-amber-500
    data-[active=medium]:bg-amber-400
    data-[active=high]:bg-amber-200
    dark:data-[active=low]:bg-amber-600
    dark:data-[active=medium]:bg-amber-500
    dark:data-[active=high]:bg-amber-300`,axis:"flex ml-2"},defaultVariants:{horizontal:!1,isStereo:!1,compact:!1},variants:{horizontal:{true:{base:"flex-col",axis:"ml-0"}},isStereo:{true:""},compact:{true:{lumps:"gap-0",lump:"rounded-none"}}},compoundVariants:[{isStereo:!1,horizontal:!1,class:{lump:"w-5 h-1.5"}},{isStereo:!1,horizontal:!0,class:{lump:"w-1.5 h-4",axis:"-mt-2"}},{isStereo:!0,horizontal:!1,class:{lump:"w-3 h-1.5"}},{isStereo:!0,horizontal:!0,class:{lump:"w-1.5 h-2.5",axis:"-mt-3"}}]}),fe=L((t,l)=>{const{value:o,horizontal:a=!1,compact:n=!1,lumpsQuantity:r=me,hideAxis:f=!1,axisProps:p,classNames:u,styles:m,onChange:d,...s}=t;ae(l,()=>b.current);const i=z(null),h=z(null);j(()=>{de(t)},[]);const b=z(null),v=Array.isArray(o),[A,F]=O(Array(r).fill(0)),[C,Y]=O([Array(r).fill(0),Array(r).fill(0)]),N=se().domain([y,g]).range([0,A.length]),G=()=>{if(v){const E=N(o[0]),_=N(o[1]),U=[C[0].map((k,B)=>B<E?1:0),C[1].map((k,B)=>B<_?1:0)];Y(U)}else{const E=N(o),_=A.map((U,k)=>k<E?1:0);F(_)}};j(()=>{d&&d(o),G()},[o,d]);const{base:J,lumps:K,lump:W,axis:Z}=pe({horizontal:a,isStereo:v,compact:n}),ee={horizontal:a,styles:m,classNames:u,minThresholdValue:N(ue),maxThresholdValue:N(ce),_lumps:K,lump:W};return e(ie,{value:ee,children:e("div",{...s,ref:b,className:M(s.className),style:{...s.style,display:"flex"},children:P("div",{className:M(J()),children:[v?e(he,{ref:h,stereoLumps:C}):e(q,{ref:i,lumps:A}),!f&&e(ne,{vertical:!a,tickSize:0,relatedRef:v?h:i,...p,className:M(Z(),u==null?void 0:u.axis),style:m==null?void 0:m.axis,min:y,max:g})]})})})}),he=L((t,l)=>{const{stereoLumps:o}=t,{horizontal:a}=X(Q);return e("div",{ref:l,className:M("flex gap-0.5",a&&"flex-col"),children:o.map((n,r)=>e(q,{lumps:n},r))})}),q=L((t,l)=>{const{lumps:o}=t,{horizontal:a,styles:n,classNames:r,minThresholdValue:f,maxThresholdValue:p,_lumps:u,lump:m}=X(Q),d=(s,i)=>s===1&&i<=f?"low":s===1&&i>p?"high":s===1&&i<=p?"medium":"none";return e("div",{ref:l,className:M(u(),r==null?void 0:r.lumps),style:{...n==null?void 0:n.lumps,flexDirection:a?"row":"column-reverse"},children:o.map((s,i)=>e("span",{"data-active":d(s,i),className:M(m(),r==null?void 0:r.lump),style:n==null?void 0:n.lump},i))})}),V=fe;V.displayName="EchoUI.VuMeter";const be=()=>{const t="/audios/loop-1.mp3",{pending:l,error:o,audioBuffer:a,fetchAudio:n}=$({url:t}),{meter:r,value:f,init:p,observe:u,cancelObserve:m}=R({value:-60}),{player:d,isPlaying:s,play:i,stop:h,init:b}=D({onPlay:u,onStop:m});return w.useEffect(()=>{n(),p()},[]),w.useEffect(()=>{!a||!r.current||b(a,[r.current])},[a,r.current]),P("section",{className:"flex flex-col items-center w-full justify-center",children:[e(T,{disabled:l||o,onClick:()=>{!d||(s?h():i())},toggled:s,className:"mb-4 mt-auto",children:s?e(I,{className:"w-4 h-4 fill-current"}):e(H,{className:"w-4 h-4 fill-current"})}),e(V,{value:f})]})},ge=()=>{const t="/audios/loop-1.mp3",{pending:l,error:o,audioBuffer:a,fetchAudio:n}=$({url:t}),{meter:r,value:f,init:p,observe:u,cancelObserve:m}=R({value:-60}),{player:d,isPlaying:s,play:i,stop:h,init:b}=D({onPlay:u,onStop:m});return w.useEffect(()=>{n(),p()},[]),w.useEffect(()=>{!a||!r.current||b(a,[r.current])},[a,r]),P("section",{className:"flex flex-col items-center w-full justify-center",children:[e(T,{disabled:l||o,onClick:()=>{!d||(s?h():i())},toggled:s,className:"mb-4 mt-auto",children:s?e(I,{className:"w-4 h-4 fill-current"}):e(H,{className:"w-4 h-4 fill-current"})}),e(V,{value:f,classNames:{lump:`
          data-[active=none]:bg-slate-200
          data-[active=low]:bg-indigo-700
          data-[active=medium]:bg-indigo-600
          data-[active=high]:bg-indigo-400
          dark:data-[active=none]:bg-slate-800
          dark:data-[active=low]:bg-indigo-400
          dark:data-[active=medium]:bg-indigo-500
          dark:data-[active=high]:bg-indigo-600`}})]})},ye=()=>{const t="/audios/loop-1.mp3",{pending:l,error:o,audioBuffer:a,fetchAudio:n}=$({url:t}),{meter:r,value:f,init:p,observe:u,cancelObserve:m}=R({value:[-60,-60]}),{player:d,isPlaying:s,play:i,stop:h,init:b}=D({onPlay:u,onStop:m});return w.useEffect(()=>{n(),p()},[]),w.useEffect(()=>{!a||!r.current||b(a,[r.current])},[a,r.current]),P("section",{className:"flex flex-col justify-center items-center",children:[e(T,{disabled:l||o,onClick:()=>{!d||(s?h():i())},toggled:s,className:"mb-5",children:s?e(I,{className:"w-4 h-4 fill-current"}):e(H,{className:"w-4 h-4 fill-current"})}),e(V,{value:f,lumpsQuantity:30})]})},Be=()=>e(S,{code:"<VuMeterDefault />",scope:{VuMeterDefault:be},type:"link",url:"https://github.com/codeacme17/echo-ui/blob/main/docs/src/components/Example/VuMeterDefault.tsx",classNames:{preview:"p-0 px-3 py-10"}}),ze=()=>e(S,{code:"<VuMeter horizontal/>",scope:{VuMeter:V},classNames:{preview:"p-0 pl-10 py-10"}}),Le=()=>e(S,{code:"<VuMeterStereo />",scope:{VuMeterStereo:ye},type:"link",url:"https://github.com/codeacme17/echo-ui/blob/main/docs/src/components/Example/VuMeterStereo.tsx"}),$e=()=>e(S,{code:`<div className='flex gap-16'>
  <div> <VuMeter lumpsQuantity={40} /> </div>
  <div> <VuMeter lumpsQuantity={50} /> </div>
</div>`,scope:{VuMeter:V},classNames:{preview:"p-0 pl-10 py-10"}}),De=()=>e(S,{code:`<div className='flex gap-20'>
  <VuMeter compact lumpsQuantity={50} value={-10}/>
  <VuMeter compact lumpsQuantity={50} value={[5, 0]}/>
</div>`,scope:{VuMeter:V},classNames:{preview:"p-0 pl-10 py-10"}}),Re=()=>e(S,{code:"<VuMeterColor />",scope:{VuMeterColor:ge},type:"link",url:"https://github.com/codeacme17/echo-ui/blob/main/docs/src/components/Example/VuMeterColor.tsx",classNames:{preview:"p-0 px-3 py-10"}}),Te=()=>e(te,{data:[{attribute:"value*",description:"The current volume value. Enables stereo mode when passing an array (required)",type:e(c,{children:"number | number[]"}),default:"-"},{attribute:"horizontal",description:"Enable horizontal mode",type:e(c,{children:"boolean"}),default:e(c,{children:"false"})},{attribute:"compact",description:"Enable compact mode",type:e(c,{children:"boolean"}),default:e(c,{children:"false"})},{attribute:"lumpsQuantity",description:"Number of volume bars",type:e(c,{children:"number"}),default:e(c,{children:"30"})},{attribute:"hideAxis",description:"Hide axis",type:e(c,{children:"boolean"}),default:e(c,{children:"false"})},{attribute:"axisProps",description:"Props passed to the Axis component",type:e(c,{children:"boolean"}),default:e(c,{children:"false"})},{attribute:"classNames",description:"Custom class names",type:e(c,{children:"{ lump?: string, lumps?: string, axis?: string }"}),default:"-"},{attribute:"styles",description:"Custom styles",type:e(c,{children:"{ lump?: React.CSSProperties, lumps?: React.CSSProperties, axis?: React.CSSProperties }"}),default:"-"},{attribute:"onChange",description:"Callback function when the value changes",type:e(c,{children:"(value: number | number[]) => void"}),default:"-"}]});export{De as C,Be as D,ze as H,$e as L,Le as S,Te as V,Re as a};
