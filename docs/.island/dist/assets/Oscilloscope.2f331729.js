import{e as A,c as D,U as x,A as O,a as o}from"./index.c8ea1d61.js";import{P as w}from"./index.5a6550a4.js";import*as s from"react";import{jsxs as P,jsx as e}from"react/jsx-runtime";import{A as R}from"./Analyser.93bf318f.js";const S=()=>{const n="https://codeacme17.github.io/1llest-waveform-vue/audios/loop-5.mp3",[l,u]=s.useState([]),[i,p]=s.useState(!1),c=s.useRef(),t=s.useRef(null),m=512*2;s.useEffect(()=>(t.current=new w(n),c.current=new R("waveform",m),t.current.toDestination(),()=>{var r,a;(r=t.current)==null||r.disconnect(),(a=t.current)==null||a.dispose()}),[]);const h=async()=>{var r;if(!t.current||!c.current){console.error("Oscillator or Analyser is not initialized");return}i?(t.current.stop(),cancelAnimationFrame(d.current),u([]),p(!1)):((r=t.current)==null||r.connect(c.current),t.current.loop=!0,t.current.start(),p(!0),f())},d=s.useRef(0),f=()=>{var a;const r=(a=c.current)==null?void 0:a.getValue();if(r instanceof Float32Array){const g=Array.from(r).map((y,b)=>({index:b,amplitude:y}));u(g)}d.current=requestAnimationFrame(f)};return P("section",{className:"flex flex-col items-center gap-2",children:[e(A,{className:"w-full",data:l}),e(D,{onClick:h,toggled:i,children:i?"Stop":"Start"})]})},F=()=>e(x,{code:"<OscilloscopeDefault />",scope:{OscilloscopeDefault:S},type:"link",url:"https://github.com/codeacme17/echo-ui/blob/main/docs/src/components/Example/OscilloscopeDefault.tsx"}),I=()=>e(O,{data:[{attribute:"data*",description:"Array data passed to the oscilloscope(required)",type:e(o,{children:"OscilloscopeDataPoint[]"}),default:"-"},{attribute:"amplitudeRange",description:"Amplitude range, this property specifies the range of the Y-axis",type:e(o,{children:"[number, number]"}),default:e(o,{children:"[-2, 2]"})},{attribute:"lineColor",description:"Color of the oscilloscope's line",type:e(o,{children:"string"}),default:e(o,{children:"'var(--echo-primary)'"})},{attribute:"lineWidth",description:"Width of the oscilloscope's line",type:e(o,{children:"number"}),default:e(o,{children:"3"})}]});export{F as D,I as O};
